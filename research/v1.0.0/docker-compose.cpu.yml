version: "3.9"

services:
  research:
    image: my-cpu-lab:ubuntu24.04   # CPU専用ビルド済みイメージ名
    container_name: my-research-cpu # コンテナ名（GPU版と区別）
    working_dir: /workspace
    volumes:
      - .:/workspace                                # ホスト作業ディレクトリ
      - /mnt/c/Users/mitsu:/win_home:ro             # Windowsユーザフォルダ (参照用)
      - /usr/local/texlive/2025:/usr/local/texlive/2025:ro # TeX Live本体
      - /usr/local/texlive/texmf-local:/usr/local/texlive/texmf-local:ro # TeXローカルパッケージ
      - /usr/local/texlive/texmf-var:/usr/local/texlive/texmf-var:rw # TeXキャッシュ/フォーマット
    user: "${UID}:${GID}"           # ホストユーザ権限を反映
    stdin_open: true                # -it の代わり
    tty: true                       # -it の代わり
